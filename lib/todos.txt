- busca de mensagem por palavra chave
- carregar primeiro as ultimas mensagens, 
depois vai carregando as mais antiga 
- ao carregar as 20 ultimas mensagens e chegar no topo da conversa,
ter botao ou listener para carregar as proximas 20 mensagens mais antigas.
-provavelmente vai ser foda sempre carregar todas as mensagens. entamos teremos que manter
na memoria quando as conversas de um chat forem carregadas, por ex singleton da conversa x.
E se tiver um cache mais pika? sempre vai carregar os chats e mensagens que estao no cache.
Ai se enviar ou receber uma nova mensagem, atualiza no banco e tbm atualiza o cache.
como o cache seria feito? tipo como mostraria as mensagens corretas? por exemplo, se eu exclui uma mensagem,
tbm tenho que excluir no cache. sempre vou ter que verificar se o firestore e o cache estao sincronizados?
oq fzr pra nao ter conflito, ficar diferente um do outro? USAR QUAL CACHE? 

-cada mensagem tera, assim como cada chatModel, seu UserModel correspondente, do senderId?
Isso facilita pra mostrar quem mandou tal mensagem, tendo facilmente o nome e avatar da pessoa.
Dessa forma, mais querys pra buscar aquele user correspondente. 

logo, forma melhor - ja que ja temos ids de todos os participantes da conversa E seus UserModels, 
pois eles estao no ChatModel daquele chat, entao vamos apenas fazer um map como base para exibicao dos dados.
    {
        id 1: {name: rodrigo, avatar: url}
        id 2: {name: jefferson, avatar: url}
    }

    Dessa forma, para exibir a mensagem x, vamos pegar o value da key x.senderId.


    Alias...melhor pegar todos os UserModels de cada ChatModel e e atribuir cada UserModel a uma
    mensagem diferente, senderId = UserModel.id. Nao teria problema pois nem eh assincrono, eh codigo


-fazer todo os tratamentos de erros com AppError (throw no service com msg, catch nos vm p exibir pras views)

-estilizar minimamente as mensagens e alinhar de acordo com os senders.

-possibilitar envio de videos e fotos, e poder salvar no celular o video que o outro mandou,

fazer varios tipos de tela de chat, tipo so mostrando a msg e foto,
ou mostrando so o nome e mensagem, etc. diferentes bubbles.


Quero com que apenas as mensagens nao sejam carregadas todas de uma vez por singleton no inicio do app.
Ai por exemplo, quando abrir um chat, carrega tudo ou um pouco e deixa em cache pra nao precisasr carregar de novo 
quando entrar no mesmo chat d enovo.

tive uma ideia  - e se eu na vdd escutar a porra toda, por exemplo, escutar por alteracoes em todos os chats?
mas tipo, eu nao escuto alteracoes de cada chat, ou seja, cada mensagem nova. eu escuto a query de documentos 
de chat de um usuario. se vier um snapshot em um documento dessa query, que NAO SEJA no documento do chat que
eu estou atualmente aberto vizualizando, ai sim abro precedentes para notificacoes (banners e numero vermelhinho.)
(ate pq n quero notfiicacao no chat que estou atualmente olhando aberto)

-ordenar as msg por data

globalziar o app todo com pt_br com flutter_localizations

possibilidade de arrastar mensagem do outro (ou propria) para reesponder

tirar TUDO que se refere a firebase dos viemodels. firebase APENAS nos services.

botao no chat pra descer ate o final

averiguar que no wpp, o lance do teclado eh rapido pq:
parece que o teclado so sobe depois que o scroll ja foi preestabelecido.

usar groupedListyvierw.